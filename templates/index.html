<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8"/>
  <title>Keyword Compass â€” TF-IDF & Similarity Explorer</title>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
</head>
<body>
  <div class="wrap">
    <header>
      <h1>ðŸ§­ Keyword Compass</h1>
      <p>Paste up to 3 texts, then analyze keywords (TF-IDF), cosine similarity, and content gaps.</p>
    </header>

    <section class="grid">
      <div class="card">
        <h3>Text 1</h3>
        <textarea id="t0" placeholder="Paste text..."></textarea>
      </div>
      <div class="card">
        <h3>Text 2</h3>
        <textarea id="t1" placeholder="Optional"></textarea>
      </div>
      <div class="card">
        <h3>Text 3</h3>
        <textarea id="t2" placeholder="Optional"></textarea>
      </div>
    </section>

    <section class="controls">
      <label>Top keywords per text
        <input id="top_n" type="number" min="5" max="50" value="15">
      </label>
      <label>Gap base (0,1,2)
        <input id="gap_base" type="number" min="0" max="2" value="0">
      </label>
      <label>Gap items
        <input id="gap_top" type="number" min="5" max="50" value="10">
      </label>
      <label>Gap min Î” (TF-IDF)
        <input id="gap_min_delta" type="number" step="0.01" value="0.05">
      </label>
      <button id="analyze">Analyze</button>
    </section>

    <section id="results" class="results hidden">
      <div class="row">
        <div class="panel">
          <h3>Top Keywords</h3>
          <div id="tops" class="tops"></div>
        </div>
        <div class="panel">
          <h3>Cosine Similarity</h3>
          <table id="sim" class="matrix"></table>
        </div>
      </div>

      <div class="panel">
        <h3>Content Gaps (vs. base)</h3>
        <div id="gaps" class="gaps"></div>
      </div>

      <div class="panel">
        <h3>AI SEO Rewrite (Gemini)</h3>
        <div class="controls" style="grid-template-columns: repeat(5, minmax(0,1fr));">
          <label>Base text index (0/1/2)
            <input id="seo_base" type="number" min="0" max="2" value="0">
          </label>
          <label>Word limit
            <input id="seo_words" type="number" min="60" max="240" value="120">
          </label>
          <label>Tone
            <input id="seo_tone" type="text" value="confident, clear, helpful">
          </label>
          <label>Audience
            <input id="seo_audience" type="text" value="safety managers">
          </label>
          <button id="seo_rewrite">AI SEO Rewrite</button>
        </div>
        <textarea id="seo_output" placeholder="Gemini rewrite appears here..." style="width:100%;height:140px;margin-top:8px;"></textarea>
      </div>

      <p class="note">How it works: tokenize â†’ remove stopwords â†’ compute TF, IDF, TF-IDF â†’ cosine similarity â†’ base-vs-others gaps by TF-IDF delta.</p>
    </section>

    <footer>
      <p>v2 idea: send your top keywords to Gemini to propose missing subtopics or FAQs.</p>
    </footer>
  </div>
  <script src="{{ url_for('static', filename='app.js') }}"></script>
</body>
</html>
